/*! cpicanco.github.io 2015-09-07 */
!function(){"use strict";function a(d){this.options=b.extend({},a.defaults,d),this.container=this.options.element,"auto"!==this.options.container&&(this.container=this.options.container),this.$container=b(this.container),this.$more=b(this.options.more),this.$more.length&&(this.setupHandler(),this.waypoint=new c(this.options))}var b=window.jQuery,c=window.Waypoint;a.prototype.setupHandler=function(){this.options.handler=b.proxy(function(){this.options.onBeforePageLoad(),this.destroy(),this.$container.addClass(this.options.loadingClass),b.get(b(this.options.more).attr("href"),b.proxy(function(a){var d=b(b.parseHTML(a)),e=d.find(this.options.more),f=d.find(this.options.items);f.length||(f=d.filter(this.options.items)),this.$container.append(f),this.$container.removeClass(this.options.loadingClass),e.length||(e=d.filter(this.options.more)),e.length?(this.$more.replaceWith(e),this.$more=e,this.waypoint=new c(this.options)):this.$more.remove(),this.options.onAfterPageLoad(f)},this))},this)},a.prototype.destroy=function(){this.waypoint&&this.waypoint.destroy()},a.defaults={container:"auto",items:".infinite-item",more:".infinite-more-link",offset:"bottom-in-view",loadingClass:"infinite-loading",onBeforePageLoad:b.noop,onAfterPageLoad:b.noop},c.Infinite=a}();